{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projekty\\\\Java\\\\React Course\\\\react-meals-http\\\\src\\\\components\\\\OrderForm\\\\OrderForm.js\",\n    _s = $RefreshSig$();\n\nimport classes from \"./OrderForm.module.css\";\nimport useInput from \"../../hooks/use-input\";\nimport { useContext } from \"react\";\nimport CartItems from \"../../store/cart-items\";\nimport Modal from \"../UI/Modal/Modal\";\nimport OrderItem from \"./OrderItem/OrderItem\";\nimport useHttp from \"../../hooks/use-http\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderForm = props => {\n  _s();\n\n  const cartContext = useContext(CartItems);\n  const orderItems = cartContext.items.map(item => {\n    return /*#__PURE__*/_jsxDEV(OrderItem, {\n      id: item.id,\n      price: item.price,\n      name: item.name,\n      amount: item.amount\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this);\n  });\n  const {\n    isLoading,\n    error,\n    sendRequest\n  } = useHttp();\n  const {\n    value: enteredName,\n    isValid: nameIsValid,\n    hasError: nameHasError,\n    valueChangeHandler: nameChangeHandler,\n    inputBlurHandler: nameInputBlurHandler,\n    reset: resetNameInput\n  } = useInput(name => name.trim() !== '');\n\n  const validateEmail = email => {\n    return String(email).toLowerCase().match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n  };\n\n  const {\n    value: enteredEmail,\n    isValid: emailIsValid,\n    hasError: emailHasError,\n    valueChangeHandler: emailChangeHandler,\n    inputBlurHandler: emailInputBlurHandler,\n    reset: resetEmailInput\n  } = useInput(validateEmail);\n  let formIsValid = false;\n\n  if (nameIsValid && emailIsValid) {\n    formIsValid = true;\n  }\n\n  const submitHandler = event => {\n    event.preventDefault();\n    props.onClose();\n\n    if (nameHasError || emailHasError) {\n      return;\n    }\n\n    const order = {\n      name: enteredName,\n      email: enteredEmail,\n      orderItems: cartContext.items\n    };\n    const requestConfig = {\n      url: \"https://react-http-a39f2-default-rtdb.firebaseio.com/orders.json\",\n      method: 'POST',\n      body: order,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    sendRequest(requestConfig, data => console.log(data));\n    resetNameInput();\n    resetEmailInput();\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: classes[\"cart-items\"],\n        children: orderItems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes['control-group'],\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes['form-control']} ${nameHasError && classes.invalid}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Full Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"name\",\n            value: enteredName,\n            onChange: nameChangeHandler,\n            onBlur: nameInputBlurHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), nameHasError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: classes['error-text'],\n            children: \"Full Name must not be empty.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 42\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${classes['form-control']} ${emailHasError && classes.invalid}`,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"E-Mail Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"email\",\n          value: enteredEmail,\n          onChange: emailChangeHandler,\n          onBlur: emailInputBlurHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), emailHasError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes['error-text'],\n          children: \"Email is invalid.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes['form-actions'],\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !formIsValid,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, this);\n};\n\n_s(OrderForm, \"PcJWhbH+yey9zTPPG+z+5jPc+LM=\", false, function () {\n  return [useHttp, useInput, useInput];\n});\n\n_c = OrderForm;\nexport default OrderForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderForm\");","map":{"version":3,"sources":["D:/Projekty/Java/React Course/react-meals-http/src/components/OrderForm/OrderForm.js"],"names":["classes","useInput","useContext","CartItems","Modal","OrderItem","useHttp","OrderForm","props","cartContext","orderItems","items","map","item","id","price","name","amount","isLoading","error","sendRequest","value","enteredName","isValid","nameIsValid","hasError","nameHasError","valueChangeHandler","nameChangeHandler","inputBlurHandler","nameInputBlurHandler","reset","resetNameInput","trim","validateEmail","email","String","toLowerCase","match","enteredEmail","emailIsValid","emailHasError","emailChangeHandler","emailInputBlurHandler","resetEmailInput","formIsValid","submitHandler","event","preventDefault","onClose","order","requestConfig","url","method","body","headers","data","console","log","invalid"],"mappings":"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","sourcesContent":["import classes from \"./OrderForm.module.css\";\r\nimport useInput from \"../../hooks/use-input\";\r\nimport {useContext} from \"react\";\r\nimport CartItems from \"../../store/cart-items\";\r\nimport Modal from \"../UI/Modal/Modal\";\r\nimport OrderItem from \"./OrderItem/OrderItem\";\r\nimport useHttp from \"../../hooks/use-http\";\r\n\r\n\r\nconst OrderForm = (props) => {\r\n    const cartContext = useContext(CartItems);\r\n    const orderItems = cartContext.items.map((item) => {\r\n        return (\r\n            <OrderItem\r\n                key={item.id}\r\n                id={item.id}\r\n                price={item.price}\r\n                name={item.name}\r\n                amount={item.amount}\r\n            />\r\n        );\r\n    });\r\n\r\n    const {\r\n        isLoading,\r\n        error,\r\n        sendRequest,\r\n    } = useHttp();\r\n\r\n    const {\r\n        value: enteredName,\r\n        isValid: nameIsValid,\r\n        hasError: nameHasError,\r\n        valueChangeHandler: nameChangeHandler,\r\n        inputBlurHandler: nameInputBlurHandler,\r\n        reset: resetNameInput,\r\n    } = useInput((name) => name.trim() !== '');\r\n\r\n    const validateEmail = (email) => {\r\n        return String(email)\r\n            .toLowerCase()\r\n            .match(\r\n                /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n            );\r\n    };\r\n\r\n    const {\r\n        value: enteredEmail,\r\n        isValid: emailIsValid,\r\n        hasError: emailHasError,\r\n        valueChangeHandler: emailChangeHandler,\r\n        inputBlurHandler: emailInputBlurHandler,\r\n        reset: resetEmailInput,\r\n    } = useInput(validateEmail);\r\n\r\n    let formIsValid = false;\r\n    if (nameIsValid && emailIsValid) {\r\n        formIsValid = true;\r\n    }\r\n\r\n    const submitHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        props.onClose();\r\n\r\n        if (nameHasError || emailHasError) {\r\n            return;\r\n        }\r\n\r\n        const order = {\r\n          name: enteredName,\r\n          email: enteredEmail,\r\n          orderItems: cartContext.items,\r\n        };\r\n\r\n        const requestConfig = {\r\n            url: \"https://react-http-a39f2-default-rtdb.firebaseio.com/orders.json\",\r\n            method: 'POST',\r\n            body: order,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        }\r\n        sendRequest(requestConfig, (data) => console.log(data));\r\n\r\n        resetNameInput();\r\n        resetEmailInput();\r\n    }\r\n\r\n    return (\r\n        <Modal>\r\n            <form onSubmit={submitHandler}>\r\n                <ul className={classes[\"cart-items\"]}>\r\n                    {orderItems}\r\n                </ul>\r\n                <div className={classes['control-group']}>\r\n                    <div className={`${classes['form-control']} ${nameHasError && classes.invalid}`}>\r\n                        <label htmlFor='name'>Full Name</label>\r\n                        <input\r\n                            type='text'\r\n                            id='name'\r\n                            value={enteredName}\r\n                            onChange={nameChangeHandler}\r\n                            onBlur={nameInputBlurHandler}\r\n                        />\r\n                        {nameHasError && <p className={classes['error-text']}>Full Name must not be empty.</p>}\r\n                    </div>\r\n                </div>\r\n                <div className={`${classes['form-control']} ${emailHasError && classes.invalid}`}>\r\n                    <label htmlFor='email'>E-Mail Address</label>\r\n                    <input\r\n                        type='text'\r\n                        id='email'\r\n                        value={enteredEmail}\r\n                        onChange={emailChangeHandler}\r\n                        onBlur={emailInputBlurHandler}\r\n                    />\r\n                    {emailHasError && <p className={classes['error-text']}>Email is invalid.</p>}\r\n                </div>\r\n                <div className={classes['form-actions']}>\r\n                    <button disabled={!formIsValid}>Submit</button>\r\n                </div>\r\n            </form>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default OrderForm;"]},"metadata":{},"sourceType":"module"}